(function(){function i(n){return typeof n=="undefined"||n===null?!1:!0}function t(n){return typeof n=="string"&&(n=document.getElementById(n)),n}function u(n){(n=t(n),n)&&(typeof n.remove=="function"?n.remove():n.parentNode.removeChild(n))}function r(n,r,u){i(u)||(u="beforeend");t(n).insertAdjacentHTML(u,r)}function f(n,t,i){n.addEventListener?n.addEventListener(t,i,!1):n.attachEvent?n.attachEvent("on"+t,i):n["on"+t]=i}function o(n){var t={X:"scrollLeft",Y:"scrollTop"};return typeof n!="undefined"&&n in t||(n="Y"),window["page"+n+"Offset"]||document.documentElement[t[n]]||document.body[t[n]]}var n={en:{x:"Close",nex:"Next month",pre:"Previous month",clear:"Clear",m:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Okt","Nov","Dec"],mo:["January","February","March","April","May","June","July","August","September","October","November","December"],w:"Mo<\/td><td>Tu<\/td><td>We<\/td><td>Th<\/td><td>Fr<\/td><td>Sa<\/td><td>Su"},ru:{x:"Закрыть",nex:"Следующий месяц",pre:"Предыдущий месяц",clear:"Очистить",m:["Янв","Фев","Мрт","Апр","Май","Июн","Июл","Авг","Сен","Окт","Нбр","Дек"],mo:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],w:"Пн<\/td><td>Вт<\/td><td>Ср<\/td><td>Чт<\/td><td>Пт<\/td><td>Сб<\/td><td>Вс"}},e={lang:"en",id:"","class":"xcalend",delim:".",order:0,o:{value:""},year:-1,month:-1,dat:-1,day:-1,dop:"",autoOn:1,autoOff:1,now:1,set0:0,x:1,hide:1,to:"",fn:""};window.xCal=function(f,s,h){var c={},l,w;for(l in e)c[l]=e[l];if(typeof s=="object")for(l in s)c[l]=s[l];else i(s)&&(c.delim=s),i(h)&&(c.order=h);if(c.id===""&&(c.id=c["class"]),typeof f!="object"){if((typeof f=="undefined"||f==0||f==1)&&t(c.id))return c.hide==1&&(typeof s!="string"?t(c.id).style.display="none":t(s).style.display="none"),!1;if(f==2||f==="now"){var y=new Date,a=y.getDate(),v=y.getMonth()+1,p=y.getFullYear();return(a<10&&(a="0"+a),v<10&&(v="0"+v),c.order==1)?p+c.delim+v+c.delim+a:c.order==2?v+c.delim+a+c.delim+p:a+c.delim+v+c.delim+p}}return(c.o=t(f),c.f=function(){var i=c.month+1,n=c.dat,r=c.year;c.sdat=c.dat;c.smonth=c.month;c.syear=c.year;c.order==1?(n=r,r=c.dat):c.order==2&&(n=i,i=c.dat);r<10&&(r="0"+r);i<10&&(i="0"+i);n<10&&(n="0"+n);n+=c.delim+i+c.delim+r;c.dop!==""&&(n+=" "+c.dop);c.o&&(c.o.value=xCal.value=n);c.hide==1&&(t(c.id).style.display="none");typeof c.fn=="function"?c.fn(n,c):typeof c.fn=="string"&&c.fn!==""&&eval(c.fn+"('"+n+"');")},typeof c.o=="undefined")?!1:(c=xCal.gVal(c),c=xCal.gDat(c),t(c.id)?t(c.id).style.display="":(c.to=c.to==""?document.body:t(c.to),r(c.to,'<table id="'+c.id+'" class="'+c["class"]+'"><thead><\/thead><tbody><\/tbody><tfoot><\/tfoot><\/table>')),w=c.o.getBoundingClientRect(),t(c.id).style.left=w.left+o("X")+"px",t(c.id).style.top=w.bottom+o()+"px",xCal.fM=function(t){var s=t.month,f="",e=1,h=n[t.lang].m,o,i;for(f+='<td colspan=2 title="12"',s==11?f+=' class="today"':t.tmonth==11&&(f+=' class="tday"'),f+=">"+n[t.lang].m[11]+"<\/td>",i=0;i<h.length-1;i++)e++,f+='<td colspan=2 title="'+(i+1)+'"',s==i?f+=' class="today"':t.tmonth==i&&(f+=' class="tday"'),f+=">"+h[i]+"<\/td>",e>2&&(f+="<\/tr><tr>",e=0);for(u(document.querySelector("#"+t.id+" tbody")),r(t.id,'<tbody><tr><th rowspan=4 valign=bottom><a href="http://cssworld.ru/en/datepicker/" target="_blank">?<\/a><\/th>'+f+"<\/tr><\/tbody>"),o=document.querySelectorAll("#"+t.id+" tbody td"),i=0;i<o.length;i++)o[i].onclick=function(){var n=this.title;n!=""&&(t.month=parseInt(n)-1,xCal.f(t))}},xCal.fY=function(n){for(var o,f=n.year,i="",e=0,t=-8;t<7;t++)e++,i+="<td colspan=2",f==f+t?i+=' class="today"':n.tyear==f+t&&(i+=' class="tday"'),i+=">"+(f+t)+"<\/td>",e>2&&(i+="<\/tr><tr>",e=0);for(u(document.querySelector("#"+n.id+" tbody")),r(n.id,'<tbody><tr><th rowspan=5 valign=bottom><a href="http://cssworld.ru/en/datepicker/" target="_blank">?<\/a><\/th>'+i+"<\/tr><\/tbody>"),o=document.querySelectorAll("#"+n.id+" tbody td"),t=0;t<o.length;t++)o[t].onclick=function(){var t=this.innerHTML;t!=""&&t!="&nbsp;"&&(n.year=parseInt(t),xCal.f(n))}},xCal.f=function(i){var f,e,h,v;u(document.querySelector("#"+i.id+" thead"));u(document.querySelector("#"+i.id+" tbody"));u(document.querySelector("#"+i.id+" tfoot"));var c,a=i.year,s=i.month,b=i.dat,p=new Date(a,s+1,0).getDate(),y=new Date(a,s,p).getDay(),w=new Date(a,s,1).getDay(),o="",l=0,k=n[i.lang].mo;for(l=w!=0?w-1:6,r(i.id,'<thead><tr><td class="cal-l" title="'+n[i.lang].pre+'">‹<\/td><td colspan=3 class="cal-m"><\/td><td colspan=2 class="cal-y"><\/td><td class="cal-r" title="'+n[i.lang].nex+'">›<\/td><\/tr><tr><td>'+n[i.lang].w+"<\/td><\/tr><\/thead>"),l>0&&(c=s==0?11:s-1,o+=l>1?"<td colspan="+l+' class="cal-l" align=left title="'+n[i.lang].pre+" "+n[i.lang].mo[c]+'"><b>‹ '+n[i.lang].m[c]+"<\/b><\/td>":'<td class="cal-l" title="'+n[i.lang].pre+" "+n[i.lang].mo[c]+'"><b>‹<\/b><\/td>'),h=1;h<=p;h++)l++,o+="<td",h==b?o+=s==i.smonth&&a==i.syear?' class="today"':' class="tday"':h==i.tdat&&s==i.tmonth&&a==i.tyear&&(o+=' class="tday"'),o+=">"+h+"<\/td>",l>6&&(o+="<\/tr><tr>",l=0);for(y>0&&(c=s>10?0:s+1,o+=y<6?"<td colspan="+(7-y)+' class="cal-r" align=right title="'+n[i.lang].nex+" "+n[i.lang].mo[c]+'"><b>'+n[i.lang].m[c]+" ›<\/b><\/td>":'<td class="cal-r" title="'+n[i.lang].nex+" "+n[i.lang].mo[c]+'"><b>›<\/b><\/td>'),r(i.id,'<tbody><tr class="cal-first">'+o+"<\/tr><\/tbody>"),o="",f=[3,3,1],i.now||(f[0]=0),i.set0||(f[1]=0),i.x||(f[2]=0),i.now&&(e=f[0]+f[1]+f[2],e<7&&(f[0]+=7-e),o+="<td colspan="+f[0]+' class="cal-nw"><\/td>'),i.set0&&(e=f[0]+f[1]+f[2],e<7&&(f[1]+=7-e),o+="<td colspan="+f[1]+' class="cal-s0">'+n[i.lang].clear+"<\/td>"),i.x&&(e=f[0]+f[1]+f[2],e<7&&(f[2]+=7-e),o+="<td colspan="+f[2]+" onClick=\"document.getElementById('"+i.id+"').style.display='none'\" title=\""+n[i.lang].x+'" class="bold">'+(f[2]>2?n[i.lang].x:"&#215;")+"<\/td>"),r(i.id,"<tfoot><tr>"+o+"<\/tr><\/tfoot>"),document.querySelector("#"+i.id+" thead td.cal-m").innerHTML=k[s],document.querySelector("#"+i.id+" thead td.cal-y").innerHTML=a,document.querySelector("#"+i.id+" thead td.cal-l").onclick=function(){xCal.mmm(i)},document.querySelector("#"+i.id+" thead td.cal-r").onclick=function(){xCal.mpp(i)},document.querySelector("#"+i.id+" thead td.cal-m").onclick=function(){xCal.fM(i)},document.querySelector("#"+i.id+" thead td.cal-y").onclick=function(){xCal.fY(i)},e=document.querySelector("#"+i.id+" tfoot td.cal-nw"),e&&(e.innerHTML=xCal(2,i),e.onclick=function(){var u="",r,n,t;if(i=xCal.gDop(i),i.dop!=""&&(u=" "+i.dop),i.o&&(i.o.value=xCal.value=this.innerHTML+u),i.hide==1)document.getElementById(i.id).style.display="none";else{for(r=document.querySelectorAll("#"+i.id+" .today"),n=0;n<r.length;n++)r[n].className="";i=xCal.gDat(i);t=new Date;i.year=t.getFullYear();i.month=t.getMonth();i.dat=t.getDate()}i.sdat=i.dat;i.smonth=i.month;i.syear=i.year;typeof i.fn=="function"?i.fn(this.innerHTML,i):typeof i.fn=="string"&&i.fn!==""&&eval(i.fn+"('"+this.innerHTML+"');");i.hide!=1&&xCal.f(i)}),e=document.querySelector("#"+i.id+" tfoot td.cal-s0"),e&&(e.onclick=function(){var n="00"+i.delim+"00"+i.delim+"00";i.order==1?n="00"+n:n+="00";i.o&&(i.o.value=xCal.value=n);i.sdat=i.dat;i.smonth=i.month;i.syear=i.year;i.hide==1&&(document.getElementById(i.id).style.display="none")}),i.autoOff&&(t(i.id).onmouseleave=function(){xCal()}),e=document.querySelectorAll("#"+i.id+" tbody td"),h=0;h<e.length;h++)e[h].onclick=function(){var t=this.innerHTML,r,n;if(t!=""&&t!="&nbsp;"){if(i.hide!=1){for(r=document.querySelectorAll("#"+i.id+" .today"),n=0;n<r.length;n++)r[n].className="";this.className="today"}i=xCal.gDop(i);i.dat=t;typeof i.f=="function"&&i.f(i.id)}};v=document.querySelector("#"+i.id+" tbody td.cal-l");v!=null&&(v.onclick=function(){xCal.mmm(i)});v=document.querySelector("#"+i.id+" tbody td.cal-r");v!=null&&(v.onclick=function(){xCal.mpp(i)})},xCal.f(c),!1)};xCal.mmm=function(n){n.month-=1;n.month<0&&(n.month=11,n.year--);xCal.f(n)};xCal.mpp=function(n){n.month+=1;n.month>11&&(n.month=0,n.year++);xCal.f(n)};xCal.gDop=function(n){if(typeof n.o=="undefined"&&(n.o={value:""}),typeof n.o.value=="undefined"||n.o.value==="")return n;var t=n.o.value.split(" ");return n.dop=i(t[1])?t[1]:"",n};xCal.gVal=function(n){var t,r;if(typeof n.o=="undefined"&&(n.o={value:""}),typeof n.o.value=="undefined"||n.o.value==="")return n;for(t=n.o.value.split(" "),n.dop=i(t[1])?t[1]:"",t=t[0].split(n.delim),r=0;r<3;r++)i(t[r])||(t[r]=-1);return n.order==2?(t[3]=t[1],t[1]=t[0],t[0]=t[3],t[1]=parseInt(t[1])-1):(n.order==1&&(t[3]=t[2],t[2]=t[0],t[0]=t[3]),t[1]=parseInt(t[1])-1),n.syear=n.year=parseInt(t[2]),n.smonth=n.month=t[1],n.sdat=n.dat=parseInt(t[0]),n};xCal.gDat=function(n){var t=new Date;return n.tyear=t.getFullYear(),n.tmonth=t.getMonth(),n.tdat=t.getDate(),n.tday=t.getDay(),n.month>-1&&(n.year<0&&(n.year=t.getFullYear()),n.dat>0?t.setFullYear(n.year,n.month,n.dat):t.setFullYear(n.year,n.month)),n.year=t.getFullYear(),n.month=t.getMonth(),n.dat=t.getDate(),n.day=t.getDay(),n.sdat=n.dat,n.smonth=n.month,n.syear=n.year,n};xCal.set=function(n){for(var t in n)e[t]=n[t]};xCal.all=function(n,t,i){var u,o,r;if(typeof n!="undefined"&&n!=""&&(u=document.getElementsByClassName?document.getElementsByClassName(n):document.querySelectorAll("."+n),!(u.length<1)))for(o=0;o<u.length;o++)r=u[o],f(r,"input",function(){xCal()}),f(r,"keyup",function(){xCal()}),f(r,"click",function(){xCal(this,t,i)}),typeof t=="object"?"autoOn"in t&&t.autoOn&&f(r,"mouseenter",function(){xCal(this,t,i)}):e.autoOn&&f(r,"mouseenter",function(){xCal(this,t,i)})}})();